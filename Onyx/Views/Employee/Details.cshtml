@using X.PagedList
@using X.PagedList.Mvc.Core
@using X.PagedList.Web.Common
@model IPagedList<Employee_GetRow_Result>
@{
    ViewData["Title"] = "Employee Details";
}
<div class="card card-solid">
    <div class="card-body pb-0">
        <div class="row" id="EmployeeTableContainer">
            <partial name="_EmployeesList" for="@Model" />
        </div>
        <nav aria-label="Page navigation">
            <ul class="pagination">
                <li class="page-item @(Model.IsFirstPage ? "disabled" : string.Empty)">
                    <a class="page-link" href="@Url.Action("Details", new { page = Model.PageNumber - 1 })" data-page="@(Model.PageNumber - 1)">Previous</a>
                </li>
                @for (int i = 1; i <= Model.PageCount; i++)
                {
                    if (Model.PageNumber <= 3 && (i <= 5 || i == Model.PageCount))
                    {
                        <li class="page-item @(i == Model.PageNumber ? "active" : string.Empty)">
                            <a class="page-link" href="@Url.Action("Details", new { page = i })">@i</a>
                        </li>
                    }
                    else if (Model.PageNumber > 3 && (i == 1 || i >= Model.PageNumber - 2) && (i <= Model.PageNumber + 2 || i == Model.PageCount))
                    {
                        <li class="page-item @(i == Model.PageNumber ? "active" : string.Empty)">
                            <a class="page-link" href="@Url.Action("Details", new { page = i })">@i</a>
                        </li>
                    }
                    else if (i == Model.PageCount - 1)
                    {
                        <li class="page-item disabled">
                            <a class="page-link" href="#">...</a>
                        </li>
                    }
                }
                <li class="page-item @(Model.IsLastPage ? "disabled" : string.Empty) next">
                    <a class="page-link" href="@Url.Action("Details", new { page = Model.PageNumber + 1 })" data-page="@(Model.PageNumber + 1)">Next</a>
                </li>
            </ul>
        </nav>
    </div>
</div>
@section scripts {
    <script>
        $('[data-toggle="tooltip"]').tooltip();
    </script>
    @* <script>
        $('body').on('click', '.pagination .page-link', function (e) {
            e.preventDefault();
            var page = $(this).data('page');

            // Make AJAX request to fetch product table for the specified page
            $.ajax({
                url: '@Url.Action("FetchEmployees")',
                type: 'POST',
                data: { page: page },
                success: function (data) {
                    $('#EmployeeTableContainer').html(data);
                },
                error: function (xhr, status, error) {
                    console.error(status, error);
                }
            });
        });
    </script> *@
}